{"version":3,"sources":["../../../../src/routes/agent/ctrls/checkNewPlayerUsername.js"],"names":["checkNewPlayerUsername","req","res","newUsername","findOne","body","username","isEmpty","json"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;AAEA,IAAMA;AAAA,sDAAyB,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEzBC,iBAFyB,GAEX,EAFW;AAAA;AAAA,aAGT,iBAAOC,OAAP,CAAe,EAAE,oBAAoBH,IAAII,IAAJ,CAASC,QAA/B,EAAf,EAA0D,KAA1D,CAHS;;AAAA;AAG7BH,iBAH6B;;AAAA,WAI1B,iBAAEI,OAAF,CAAUJ,WAAV,CAJ0B;AAAA;AAAA;AAAA;;AAAA;AAAA,aAIkB,gBAAMC,OAAN,CAAc,EAAE,oBAAoBH,IAAII,IAAJ,CAASC,QAA/B,EAAd,EAAyD,KAAzD,CAJlB;;AAAA;AAIFH,iBAJE;;AAAA;AAAA,WAK1B,iBAAEI,OAAF,CAAUJ,WAAV,CAL0B;AAAA;AAAA;AAAA;;AAAA;AAAA,aAKkB,qBAAWC,OAAX,CAAmB,EAAE,oBAAoBH,IAAII,IAAJ,CAASC,QAA/B,EAAnB,EAA8D,KAA9D,CALlB;;AAAA;AAKFH,iBALE;;AAAA;AAM7B,uBAAEI,OAAF,CAAUJ,WAAV,IAAyBA,cAAc,IAAvC,GAA8CA,cAAc,MAA5D;AACAD,UAAIM,IAAJ,CAASL,WAAT;AAP6B;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAzB;;AAAA;AAAA;AAAA;AAAA,GAAN;;kBAaeH,sB","file":"checkNewPlayerUsername.js","sourcesContent":["import moment from 'moment'\nimport Player from '../../../models/Player';\nimport Agent from '../../../models/Agent';\nimport SuperAgent from '../../../models/SuperAgent';\nimport _ from 'lodash'\n\nconst checkNewPlayerUsername = async (req, res) => {\n\ttry{\n\t\tlet newUsername = ''\n\t\tnewUsername = await Player.findOne({ 'account.username': req.body.username }, '_id')\n\t\tif(_.isEmpty(newUsername)) newUsername = await Agent.findOne({ 'account.username': req.body.username }, '_id')\n\t\tif(_.isEmpty(newUsername)) newUsername = await SuperAgent.findOne({ 'account.username': req.body.username }, '_id')\n\t\t_.isEmpty(newUsername) ? newUsername = 'OK' : newUsername = 'USED'\n\t\tres.json(newUsername)\n\t}catch(err){\n\t\tthrow err\n\t}\n}\n\nexport default checkNewPlayerUsername;\n\n"]}