{"version":3,"sources":["../../../../src/routes/agent/ctrls/fetchAccount.js"],"names":["fetchAccount","req","res","find","user","_id","$gte","startOf","$lte","endOf","agentHistoryBets","json"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA;AAAA,sDAAe,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAGY,qBAAWC,IAAX,CAAgB,EAAE,eAAeF,IAAIG,IAAJ,CAASC,GAA1B,EAA+B,YAAY,EAACC,MAAM,wBAASC,OAAT,CAAiB,SAAjB,CAAP,EAAoCC,MAAM,wBAASC,KAAT,CAAe,SAAf,CAA1C,EAA3C,EAAhB,EAAmI,uBAAnI,CAHZ;;AAAA;AAGbC,sBAHa;;AAInBR,UAAIS,IAAJ,CAASD,gBAAT;;AAJmB;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAf;;AAAA;AAAA;AAAA;AAAA,GAAN;;kBAYeV,Y","file":"fetchAccount.js","sourcesContent":["import moment from 'moment';\nimport _ from 'lodash'\nimport Agent from '../../../models/Agent';\nimport { OpenBet, HistoryBet } from '../../../models/BetOrder';\n\nconst fetchAccount = async (req, res) => {\n\ttry{\n\n\t\tconst agentHistoryBets = await HistoryBet.find({ 'owner.agent': req.user._id, 'closedAt': {$gte: moment().startOf('isoWeek'), $lte: moment().endOf('isoWeek')} }, 'closedAt resultAmount')\n\t\tres.json(agentHistoryBets)\n\n\t}catch(err){\n\t\tthrow err\n\t}\n}\n\n\nexport default fetchAccount;"]}