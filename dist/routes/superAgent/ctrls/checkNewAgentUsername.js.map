{"version":3,"sources":["../../../../src/routes/superAgent/ctrls/checkNewAgentUsername.js"],"names":["checkNewAgentUsername","req","res","newUsername","findOne","body","username","isEmpty","json"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;AAEA,IAAMA;AAAA,sDAAwB,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAExBC,iBAFwB,GAEV,EAFU;AAAA;AAAA,aAGR,iBAAOC,OAAP,CAAe,EAAE,oBAAoBH,IAAII,IAAJ,CAASC,QAA/B,EAAf,EAA0D,KAA1D,CAHQ;;AAAA;AAG5BH,iBAH4B;;AAAA,WAIzB,iBAAEI,OAAF,CAAUJ,WAAV,CAJyB;AAAA;AAAA;AAAA;;AAAA;AAAA,aAImB,gBAAMC,OAAN,CAAc,EAAE,oBAAoBH,IAAII,IAAJ,CAASC,QAA/B,EAAd,EAAyD,KAAzD,CAJnB;;AAAA;AAIDH,iBAJC;;AAAA;AAAA,WAKzB,iBAAEI,OAAF,CAAUJ,WAAV,CALyB;AAAA;AAAA;AAAA;;AAAA;AAAA,aAKmB,qBAAWC,OAAX,CAAmB,EAAE,oBAAoBH,IAAII,IAAJ,CAASC,QAA/B,EAAnB,EAA8D,KAA9D,CALnB;;AAAA;AAKDH,iBALC;;AAAA;AAM5B,uBAAEI,OAAF,CAAUJ,WAAV,IAAyBA,cAAc,IAAvC,GAA8CA,cAAc,MAA5D;AACAD,UAAIM,IAAJ,CAASL,WAAT;AAP4B;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAxB;;AAAA;AAAA;AAAA;AAAA,GAAN;;kBAaeH,qB","file":"checkNewAgentUsername.js","sourcesContent":["import moment from 'moment'\nimport Player from '../../../models/Player';\nimport Agent from '../../../models/Agent';\nimport SuperAgent from '../../../models/SuperAgent';\nimport _ from 'lodash'\n\nconst checkNewAgentUsername = async (req, res) => {\n\ttry{\n\t\tlet newUsername = ''\n\t\tnewUsername = await Player.findOne({ 'account.username': req.body.username }, '_id')\n\t\tif(_.isEmpty(newUsername)) newUsername = await Agent.findOne({ 'account.username': req.body.username }, '_id')\n\t\tif(_.isEmpty(newUsername)) newUsername = await SuperAgent.findOne({ 'account.username': req.body.username }, '_id')\n\t\t_.isEmpty(newUsername) ? newUsername = 'OK' : newUsername = 'USED'\n\t\tres.json(newUsername)\n\t}catch(err){\n\t\tthrow err\n\t}\n}\n\nexport default checkNewAgentUsername;\n\n"]}