{"version":3,"sources":["../../../../src/routes/superAgent/ctrls/fetchAccount.js"],"names":["fetchAccount","req","res","findOne","user","_id","superAgent","find","agents","players","json","account","username","passcode","role"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;AAEA,IAAMA;AAAA,sDAAe,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAEM,qBAAWC,OAAX,CAAmB,EAAE,OAAOF,IAAIG,IAAJ,CAASC,GAAlB,EAAnB,EAA4C,gDAA5C,CAFN;;AAAA;AAEbC,gBAFa;AAAA;AAAA,aAGE,gBAAMC,IAAN,CAAW,EAAX,EAAe,SAAf,CAHF;;AAAA;AAGbC,YAHa;AAAA;AAAA,aAIG,iBAAOD,IAAP,CAAY,EAAZ,EAAgB,SAAhB,CAJH;;AAAA;AAIbE,aAJa;;AAKnBP,UAAIQ,IAAJ,CAAS;AACRC,gBAAS;AACRC,kBAAUN,WAAWK,OAAX,CAAmBC,QADrB;AAERC,kBAAUP,WAAWK,OAAX,CAAmBE,QAFrB;AAGRC,cAAMR,WAAWK,OAAX,CAAmBG;AAHjB,QADD;AAMRN,eAAQA,MANA;AAORC,gBAASA;AAPD,OAAT;AALmB;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAf;;AAAA;AAAA;AAAA;AAAA,GAAN;;kBAmBeT,Y","file":"fetchAccount.js","sourcesContent":["import moment from 'moment';\nimport SuperAgent from '../../../models/SuperAgent';\nimport Agent from '../../../models/Agent';\nimport Player from '../../../models/Player';\n\nconst fetchAccount = async (req, res) => {\n\ttry{\n\t\tconst superAgent = await SuperAgent.findOne({ '_id': req.user._id }, 'account.username account.passcode account.role')\n\t\tconst agents = await Agent.find({}, 'account')\n\t\tconst players = await Player.find({}, 'account')\n\t\tres.json({\n\t\t\taccount: {\n\t\t\t\tusername: superAgent.account.username,\n\t\t\t\tpasscode: superAgent.account.passcode,\n\t\t\t\trole: superAgent.account.role\n\t\t\t},\n\t\t\tagents: agents,\n\t\t\tplayers: players\n\t\t})\n\t}catch(err){\n\t\tthrow err\n\t}\n}\n\nexport default fetchAccount;\n"]}