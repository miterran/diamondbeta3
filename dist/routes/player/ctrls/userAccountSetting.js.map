{"version":3,"sources":["../../../../src/routes/player/ctrls/userAccountSetting.js"],"names":["userAccountSetting","req","res","body","currentPassword","newPassword","newPasscode","updatePass","findOne","_id","user","player","account","password","toLowerCase","json","isEmpty","findOneAndUpdate","$set","new","updatedPlayer"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;;;AAEA,IAAMA;AAAA,sDAAqB,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAE6BD,IAAIE,IAFjC,EAEjBC,eAFiB,aAEjBA,eAFiB,EAEAC,WAFA,aAEAA,WAFA,EAEaC,WAFb,aAEaA,WAFb;AAGrBC,gBAHqB,GAGR,EAHQ;AAAA;AAAA,aAIJ,iBAAOC,OAAP,CAAe,EAAEC,KAAKR,IAAIS,IAAJ,CAASD,GAAhB,EAAf,EAAsC,kBAAtC,CAJI;;AAAA;AAInBE,YAJmB;;AAAA,YAKtBA,OAAOC,OAAP,CAAeC,QAAf,CAAwBC,WAAxB,OAA0CV,gBAAgBU,WAAhB,EALpB;AAAA;AAAA;AAAA;;AAMxBZ,UAAIa,IAAJ,CAAS,UAAT;AANwB;AAAA;;AAAA;AAQxB,UAAG,CAAC,iBAAEC,OAAF,CAAUX,WAAV,CAAJ,EAA4BE,WAAW,kBAAX,IAAiCF,WAAjC;AAC5B,UAAG,CAAC,iBAAEW,OAAF,CAAUV,WAAV,CAAJ,EAA4BC,WAAW,kBAAX,IAAiCD,WAAjC;AATJ;AAAA,aAUI,iBAAOW,gBAAP,CAAwB,EAAER,KAAKR,IAAIS,IAAJ,CAASD,GAAhB,EAAxB,EAA+C,EAAES,MAAMX,UAAR,EAA/C,EAAqE,EAAEY,KAAK,IAAP,EAArE,CAVJ;;AAAA;AAUlBC,mBAVkB;;AAWxBlB,UAAIa,IAAJ,CAAS,MAAT;;AAXwB;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAArB;;AAAA;AAAA;AAAA;AAAA,GAAN;;kBAkBef,kB","file":"userAccountSetting.js","sourcesContent":["import Player from '../../../models/Player';\nimport _ from 'lodash'\n\nconst userAccountSetting = async (req, res) => {\n\ttry{\n\t\tconst { currentPassword, newPassword, newPasscode } = req.body\n\t\tlet updatePass = {}\n\t\tconst player = await Player.findOne({ _id: req.user._id }, 'account.password')\n\t\tif(player.account.password.toLowerCase() !== currentPassword.toLowerCase()){\n\t\t\tres.json('notMatch')\n\t\t}else{\n\t\t\tif(!_.isEmpty(newPassword)) updatePass['account.password'] = newPassword\n\t\t\tif(!_.isEmpty(newPasscode)) updatePass['account.passcode'] = newPasscode\n\t\t\tconst updatedPlayer = await Player.findOneAndUpdate({ _id: req.user._id }, { $set: updatePass }, { new: true })\n\t\t\tres.json('pass')\n\t\t}\n\t}catch(err){\n\t\tthrow err\n\t}\n}\n\nexport default userAccountSetting;\n\n"]}