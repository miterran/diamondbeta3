{"version":3,"sources":["../../../src/updateDB/confirmOrderTypeResult/confirmResultStraight.js"],"names":["confirmResultStraight","openBet","betOrderStatus","resultAmount","eventOdds","status","Number","wagerDetail","winAmount","riskAmount","toFixed","console","log","orderNumber"],"mappings":";;;;;;AAAA;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;;;;;AAGA,IAAMA;AAAA,sDAAwB,iBAAOC,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAEzBC,oBAFyB,GAER,KAFQ;AAGzBC,kBAHyB,GAGV,CAHU;AAAA,oBAMtBF,QAAQG,SAAR,CAAkB,CAAlB,EAAqBC,MANC;AAAA,sCAOvB,KAPuB,uBAWvB,MAXuB,uBAevB,UAfuB,wBAmBvB,WAnBuB,wBAuBvB,MAvBuB,wBA2BvB,WA3BuB,wBA4BvB,UA5BuB;AAAA;;AAAA;AAQ3BH,uBAAiB,KAAjB;AACAC,qBAAeG,OAAOL,QAAQM,WAAR,CAAoBC,SAA3B,CAAf;AAT2B;;AAAA;AAY3BN,uBAAiB,MAAjB;AACAC,qBAAe,CAACG,OAAOL,QAAQM,WAAR,CAAoBE,UAA3B,CAAhB;AAb2B;;AAAA;AAgB3BP,uBAAiB,KAAjB;AACAC,qBAAe,CAAEG,OAAOL,QAAQM,WAAR,CAAoBC,SAA3B,IAAwC,CAA1C,EAA8CE,OAA9C,EAAf;AAjB2B;;AAAA;AAoB3BR,uBAAiB,MAAjB;AACAC,qBAAe,CAAC,CAAEG,OAAOL,QAAQM,WAAR,CAAoBE,UAA3B,IAAyC,CAA3C,EAA+CC,OAA/C,EAAhB;AArB2B;;AAAA;AAwB3BR,uBAAiB,MAAjB;AACAC,qBAAe,CAAf;AAzB2B;;AAAA;AA6B3BD,uBAAiB,UAAjB;AACAC,qBAAe,CAAf;AA9B2B;;AAAA;AAiC3BQ,cAAQC,GAAR,CAAYX,QAAQY,WAAR,GAAsB,wBAAlC;AAjC2B,uCAkCpB,KAlCoB;;AAAA;AAAA,YAsC1BX,mBAAmB,KAtCO;AAAA;AAAA;AAAA;;AAAA;AAAA,aAwCtB,iCAAkBD,OAAlB,EAA2BC,cAA3B,EAA2CC,YAA3C,CAxCsB;;AAAA;AAAA,uCA0CrB,IA1CqB;;AAAA;AAAA,uCA6CrB,KA7CqB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAxB;;AAAA;AAAA;AAAA;AAAA,GAAN;;kBAoDeH,qB","file":"confirmResultStraight.js","sourcesContent":["import { OpenBet, HistoryBet } from '../../models/BetOrder';\nimport moment from 'moment'\n\nimport Agent from '../../models/Agent';\nimport AgentTransaction from '../../models/AgentTransaction';\nimport saveNewHistoryBet from './utils/saveNewHistoryBet'\n\n\nconst confirmResultStraight = async (openBet) => {\n\n\tlet betOrderStatus = 'TBD'\n\tlet resultAmount = 0\n\n\n\tswitch(openBet.eventOdds[0].status){\n\t\tcase 'Won':\n\t\t\tbetOrderStatus = 'Won'\n\t\t\tresultAmount = Number(openBet.wagerDetail.winAmount)\n\t\t\tbreak;\n\t\tcase 'Lost':\n\t\t\tbetOrderStatus = 'Lost'\n\t\t\tresultAmount = -Number(openBet.wagerDetail.riskAmount)\n\t\t\tbreak;\n\t\tcase 'Won Half':\n\t\t\tbetOrderStatus = 'Won'\n\t\t\tresultAmount = ( Number(openBet.wagerDetail.winAmount) / 2 ).toFixed()\n\t\t\tbreak;\n\t\tcase 'Lost Half':\n\t\t\tbetOrderStatus = 'Lost'\n\t\t\tresultAmount = -( Number(openBet.wagerDetail.riskAmount) / 2 ).toFixed()\n\t\t\tbreak;\n\t\tcase 'Push':\n\t\t\tbetOrderStatus = 'Push'\n\t\t\tresultAmount = 0\n\t\t\tbreak;\n\t\tcase 'Postponed':\n\t\tcase 'Canceled':\n\t\t\tbetOrderStatus = 'Canceled'\n\t\t\tresultAmount = 0\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tconsole.log(openBet.orderNumber + ' straight not finished')\n\t\t\treturn false;\n\t}\n\n\n\tif(betOrderStatus !== 'TBD'){\n\n\t\tawait saveNewHistoryBet(openBet, betOrderStatus, resultAmount)\n\t\t\n\t\treturn true\n\n\t}else{\n\t\treturn false\n\t}\n\n\n\n}\n\nexport default confirmResultStraight"]}